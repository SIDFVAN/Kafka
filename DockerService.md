docker service create \
    --name kafka1 \
    --mount type=volume,source=k1-logs,destination=/tmp/kafka-logs \
    --publish 9094:9094 \
    --network kafka-net \
    --mode global \
    --constraint node.labels.kafka==1 \
frankv72/bp2024:1.2 \
/opt/kafka/bin/kafka-server-start.sh /opt/kafka/config/kraft/server.properties \
--override node.id=1 \
--override broker.id=1 \
--override num.network.threads=3 \
--override num.io.threads=8 \
--override log.dirs=/opt/kafka/data \
--override metadata.log.dir=/opt/kafka/logs_metadata \
--override num.io.threads=8 \
--override process.roles=broker,controller  \
--override listeners=BROKER://172.16.0.3:9094,CONTROLLER://172.16.0.3:9095  \
--override advertised.listeners=BROKER://172.16.0.3:9094  \
--override listener.security.protocol.map=BROKER:SASL_PLAINTEXT,CONTROLLER:SASL_PLAINTEXT  \
--override controller.listener.names=CONTROLLER  \
--override controller.quorum.voters=1@172.16.0.3:9095  \
--override inter.broker.listener.name=BROKER  \
--override sasl.enabled.mechanisms=PLAIN \
--override sasl.mechanism.controller.protocol=PLAIN  \
--override sasl.mechanism.inter.broker.protocol=PLAIN \
--override authorizer.class.name=org.apache.kafka.metadata.authorizer.StandardAuthorizer  \
--override allow.everyone.if.no.acl.found=false  \
--override super.users=User:admin \
--override delete.topic.enable=true \
--override socket.send.buffer.bytes=1048576 \
--override socket.receive.buffer.bytes=1048576 \
--override socket.request.max.bytes=104857600 \
--override num.partitions=3 \
--override default.replication.factor=2 \
--override min.insync.replicas=2 \
--override log.retention.hours=168 \
--override log.segment.bytes=1073741824 \
--override log.retention.check.interval.ms=300000 \
--override auto.create.topics.enable=true \
--override unclean.leader.election.enable=false